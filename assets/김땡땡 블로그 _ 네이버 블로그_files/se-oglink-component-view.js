(window.__se_editor_jsonp=window.__se_editor_jsonp||[]).push([[59],{1329:function(e,t,n){"use strict";n.r(t);var o,r=n(0),a=n.n(r),i=n(50),s=n.n(i),l=n(49),p=n(370),c=n(52),u=n(86),m=n(87),h=n(490),d=n(484),f=n(455),b=n(710),v=(o=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._handleAfterRenderUnit=function(){t.props.useCase.repaintCursor()},t._handleClickDeleteThumbnail=function(e){var n=t.props,o=n.store,r=n.useCase,a=o.id;r.changeToTextLayout(a),b.a.log(e.nativeEvent)},t}a()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,o=e.children,r=t.id,a=t.ctype,i=t.layout,s=t.useBsizeThumbnail;return l.b.createElement(u.a,{id:r,ctype:a,layout:i,i18n:n},l.b.createElement(m.a,{compId:r,compStore:t},l.b.createElement(h.a,{store:t,msg:{DELETE_THUMBNAIL:n("oglinkComponent:delete_thumbnail")},i18n:n,useBsizeThumbnail:s,onAfterRenderUnit:this._handleAfterRenderUnit,logAreaId:"ogkct",onClickDeleteThumbnail:this._handleClickDeleteThumbnail,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext},o)))},n._handleMoveToPrev=function(){this.props.useCase.moveToPrev(this.props.store.id)},n._handleMoveToNext=function(){this.props.useCase.moveToNext(this.props.store.id)},t}(l.b.Component),s()(o.prototype,"_handleMoveToPrev",[c.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_handleMoveToPrev"),o.prototype),s()(o.prototype,"_handleMoveToNext",[c.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_handleMoveToNext"),o.prototype),o);v.defaultProps={i18n:function(e){return e}},v.propTypes={shouldForceRefresh:l.a.bool,useCase:l.a.instanceOf(f.a).isRequired,store:l.a.instanceOf(d.a).isRequired,i18n:l.a.func,children:l.a.oneOfType([l.a.element,l.a.array])},t.default=Object(p.b)(v)},490:function(e,t,n){"use strict";var o,r=n(1),a=n.n(r),i=n(0),s=n.n(i),l=n(50),p=n.n(l),c=n(54),u=n.n(c),m=n(49),h=n(370),d=n(547),f=n(52),b=n(88),v=n(74),_=n(85),y=n(120),T={image:"ff120",vertical_image:"ff250_444",large_image:"ff500_300",shopping_affiliate_image:"ff120",moment:"w240_q90"},g=(o=function(e){function t(){var t;return(t=e.call(this)||this).state={isThumbnailValid:!0},t}s()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onAfterRenderUnit()},n.componentDidUpdate=function(){this.props.onAfterRenderUnit()},n.render=function(){var e=this.props,t=e.store,n=e.children,o=e.elementRef,r=t.ctype,a=t.title,i=t.description,s=t.domain,l=t.isAffiliate,p=this._decodeHtmlEntity(a),c=this._decodeHtmlEntity(i),u=this._resolveSectionClassName(),h=this._renderThumbnail();return m.b.createElement(b.a,{blockWrapperProps:t,forwardRef:o,draggable:"true",className:u,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext},m.b.createElement(v.a,{ctype:r},h,m.b.createElement("div",{className:"se-oglink-info"},m.b.createElement("div",{className:"se-oglink-info-container"},m.b.createElement("strong",{className:"se-oglink-title"},p),m.b.createElement("p",{className:"se-oglink-summary"},c,l?this._renderNpayIcon():null),m.b.createElement("p",{className:"se-oglink-url"},s))),m.b.createElement("div",{className:"se-oglink-frame",ref:this._ref}),n))},n._ref=function(e){this._oglinkFrame=e},n._renderNpayIcon=function(){var e=this.props.i18n;return m.b.createElement("em",{className:"se-oglink-npay"},m.b.createElement("span",{className:"se-blind"},e("oglinkComponent:npay_available")))},n._resolveSectionClassName=function(){var e=this.props.store.isVerticalThumbnail;return u()({"se-section-oglink-vertical":e})},n._renderThumbnail=function(){var e=this.props.store,t=e.video,n=e.isMomentLayout;if(!this._resolveThumbnailType()||!this._imageUrl||!this.state.isThumbnailValid)return null;var o=this._renderThumbnailImage(),r=this._renderThumbnailDeleteButton(),a=n?this._renderMomentVideoPlayer():this._renderVideoPlayer(t);return m.b.createElement("div",{className:"se-oglink-thumbnail"},o,a,r,m.b.createElement("div",{className:"se-oglink-thumbnail-frame"}))},n._renderThumbnailDeleteButton=function(){var e=this.props,t=e.msg,n=e.onClickDeleteThumbnail,o=e.logAreaId+".x";return e.store.isMomentLayout?null:m.b.createElement("button",{type:"button","data-log":o,className:"se-oglink-thumbnail-delete",onClick:n},m.b.createElement("span",{className:"se-blind"},t.DELETE_THUMBNAIL))},n._renderVideoPlayer=function(e){return e?m.b.createElement("span",{className:"se-oglink-thumbnail-video-icon"}):null},n._renderMomentVideoPlayer=function(){return m.b.createElement("span",{className:"se-oglink-thumbnail-moment-icon"})},n._renderThumbnailImage=function(){var e=this,t=this.props,n=t.store,o=t.onAfterRenderUnit,r=n.title,a={src:this._imageUrl,className:"se-oglink-thumbnail-resource",alt:d.a.restoreSpecialChar(r),onLoad:function(t){t.height=e._oglinkFrame?e._oglinkFrame.clientHeight:0,o(t)},onError:this._handleThumbnailError};return m.b.createElement(_.b,a)},n._resolveThumbnailType=function(){var e=this.props.store.layout;return T[e]},n._handleThumbnailError=function(){this.setState({isThumbnailValid:!1})},n._decodeHtmlEntity=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},n._handleMoveToPrev=function(){this.props.onMoveToPrev()},n._handleMoveToNext=function(){this.props.onMoveToNext()},a()(t,[{key:"_imageUrl",get:function(){var e=this.props.store,t=e.thumbnail,n=e.isMomentLayout;if(!t||!t.src)return null;var o=t.src;return n?o:y.a.makeDthumbUrl(o,this._resolveThumbnailType())}}]),t}(m.b.Component),p()(o.prototype,"_imageUrl",[m.e],Object.getOwnPropertyDescriptor(o.prototype,"_imageUrl"),o.prototype),p()(o.prototype,"_ref",[f.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_ref"),o.prototype),p()(o.prototype,"_renderThumbnailDeleteButton",[f.muteIfReadOnly],Object.getOwnPropertyDescriptor(o.prototype,"_renderThumbnailDeleteButton"),o.prototype),p()(o.prototype,"_handleThumbnailError",[f.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_handleThumbnailError"),o.prototype),p()(o.prototype,"_handleMoveToPrev",[f.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_handleMoveToPrev"),o.prototype),p()(o.prototype,"_handleMoveToNext",[f.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_handleMoveToNext"),o.prototype),o);g.defaultProps={msg:{},onClickDeleteThumbnail:function(){},onAfterRenderUnit:function(){},onMoveToPrev:function(){},onMoveToNext:function(){}},g.propTypes={elementRef:m.a.oneOfType([m.a.func,m.a.shape({current:m.a.instanceOf(Element)})]),store:m.a.object.isRequired,msg:m.a.object,onClickDeleteThumbnail:m.a.func,onAfterRenderUnit:m.a.func,children:m.a.oneOfType([m.a.element,m.a.array]),i18n:m.a.func,onMoveToPrev:m.a.func,onMoveToNext:m.a.func};t.a=Object(h.b)(g)}}]);